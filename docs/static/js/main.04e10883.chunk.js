(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{174:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),s=n.n(r),i=n(18),o=n(114),l=n(10),u=n(8),d=n(221),j=n(222),b=n(228),p=n(117),f=n(199),h=Object(b.a)(Object(p.a)({palette:{type:"dark",primary:f.a,text:{primary:"#fafafa",secondary:"#e0e0e0"}},typography:{h1:{fontFamily:['"Proxima Nova"','"Helvetica"',"-apple-system","Arial","sans-serif"].join(",")},h2:{fontFamily:['"Proxima Nova"','"Helvetica"',"-apple-system","Arial","sans-serif"].join(",")},h3:{fontFamily:['"Proxima Nova"','"Helvetica"',"-apple-system","Arial","sans-serif"].join(",")},h4:{fontFamily:['"Proxima Nova"','"Helvetica"',"-apple-system","Arial","sans-serif"].join(",")},h5:{fontFamily:['"Proxima Nova"','"Helvetica"',"-apple-system","Arial","sans-serif"].join(",")},fontFamily:['"Helvetica Neue"',"-apple-system","Arial","sans-serif"].join(",")}})),O=n(204),m=n(205),g=n(224),x=n(203),y=n(62),v=n(200),w=n(110),C=n.n(w),k=n(109),P=n.n(k),T=n(20),I=n.n(T),S=n(35),R=n(19),N=n(107),A=n(36),L=n.n(A),F="https://devracer.herokuapp.com",G="user",D=Object(R.b)("".concat(G,"/fetchUserData"),function(){var e=Object(S.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userid,e.next=3,L.a.post("".concat(F,"/graphql"),{query:"\n\tquery fetchUserData($userid: String) {\n\t\tuser(userId: $userid) {\n\t\t\tpreferences {\n\t\t\t\tdisplayName\n\t\t\t}\n\t\t\tprofile {\n\t\t\t\taverageTPMAllTime\n\t\t\t\taverageTPMLast10\n\t\t\t\tmaxTPM\n\t\t\t\tracesCompleted\n\t\t\t\tracesWon\n\t\t\t\ttotalWordsTyped\n\t\t\t}\n\t\t}\n\t}\n",variables:{userid:n}});case 3:return a=e.sent,e.abrupt("return",a.data.data.user);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E={profile:{totalWordsTyped:0,racesCompleted:0,racesWon:0,maxTPM:0,averageTPMAllTime:0,averageTPMLast10:0},preferences:{displayName:""},status:"idle"},q=Object(R.c)({name:G,initialState:E,reducers:{resetUser:function(e){e.profile=E.profile,e.preferences=E.preferences,e.status=E.status}},extraReducers:function(e){e.addCase(D.fulfilled,(function(e,t){e.preferences=t.payload.preferences,e.profile=t.payload.profile,e.status="succeeded"})),e.addCase(D.pending,(function(e){e.status="loading"})),e.addCase(D.rejected,(function(e){e.preferences=E.preferences,e.profile=E.profile,e.status="failed"}))}}),H=q.reducer,M=q.actions.resetUser,W=function(e){return e.auth.isLoggedIn?e.user.preferences.displayName:"Guest"},B="auth",J=Object(R.b)("".concat(B,"/login"),function(){var e=Object(S.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(F,"/auth/login"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(R.b)("".concat(B,"/githubCallback"),function(){var e=Object(S.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(F,"/auth/githubCallback?").concat(t.toString()),{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=Object(R.b)("".concat(B,"/register"),function(){var e=Object(S.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(F,"/auth/register"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=Object(R.b)("".concat(B,"/logout"),function(){var e=Object(S.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(F,"/auth/logout"),t);case 2:return n.dispatch(M()),e.abrupt("return",{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Q=Object(R.b)("".concat(B,"/refresh"),function(){var e=Object(S.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(F,"/auth/refresh"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$=Object(R.c)({name:B,initialState:{accessToken:"",refreshToken:"",status:"idle",isLoggedIn:!1},reducers:{resetStatus:function(e){e.status="idle"}},extraReducers:function(e){e.addCase(J.fulfilled,(function(e,t){e.status="succeeded",e.accessToken=t.payload.accessToken,e.refreshToken=t.payload.refreshToken,e.isLoggedIn=!0})),e.addCase(J.pending,(function(e){e.status="loading"})),e.addCase(J.rejected,(function(e){e.status="failed"})),e.addCase(z.fulfilled,(function(e,t){e.status="succeeded",e.accessToken=t.payload.accessToken,e.refreshToken=t.payload.refreshToken,e.isLoggedIn=!0})),e.addCase(z.pending,(function(e){e.status="loading"})),e.addCase(z.rejected,(function(e){e.status="failed"})),e.addCase(_.fulfilled,(function(e,t){e.status="succeeded",e.accessToken=t.payload.accessToken,e.refreshToken=t.payload.refreshToken,e.isLoggedIn=!0})),e.addCase(_.pending,(function(e){e.status="loading"})),e.addCase(_.rejected,(function(e){e.status="failed"})),e.addCase(Q.fulfilled,(function(e,t){e.status="idle",e.accessToken=t.payload.accessToken,e.refreshToken=t.payload.refreshToken,e.isLoggedIn=!0})),e.addCase(Q.pending,(function(e){e.status="loading"})),e.addCase(Q.rejected,(function(e){e.status="failed",e.accessToken="",e.refreshToken="",e.isLoggedIn=!1})),e.addCase(U.fulfilled,(function(e){e.accessToken="",e.refreshToken="",e.status="succeeded",e.isLoggedIn=!1})),e.addCase(U.pending,(function(e){e.status="loading"})),e.addCase(U.rejected,(function(e){e.status="failed"}))}}),K=$.reducer,V=$.actions.resetStatus,X=function(e){return e.auth.refreshToken},Y=function(e){return e.auth.status},Z=function(e){return e.auth.isLoggedIn},ee=function(e){if(e.auth.accessToken){var t=e.auth.accessToken;return Object(N.a)(t).userid}return""},te=n(2),ne=function(e){e.isHome;var t=Object(l.g)(),n=Object(u.b)(),a=Object(u.c)(Z),c=Object(u.c)(X),r=Object(u.c)(W),s=a?"Welcome back, "+r:"Playing as Guest",i=a?Object(te.jsx)(v.a,{variant:"outlined",size:"small",onClick:function(){n(U({refreshToken:c})),n(V),t.push("/")},children:"Logout"}):Object(te.jsx)(v.a,{variant:"outlined",size:"small",onClick:function(){t.push("/login")},children:"Login"});return Object(te.jsxs)(x.a,{container:!0,justify:"space-between",children:[Object(te.jsx)(x.a,{item:!0,xs:3,children:Object(te.jsx)(g.a,{display:"flex",children:Object(te.jsx)(v.a,{variant:"outlined",size:"small",onClick:function(){t.push("/")},children:"Home"})})}),Object(te.jsx)(x.a,{item:!0,xs:6,children:Object(te.jsx)(g.a,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(te.jsx)(y.a,{component:"span",align:"center",color:"textSecondary",children:s})})}),Object(te.jsx)(x.a,{item:!0,xs:3,justify:"flex-end",children:Object(te.jsx)(g.a,{display:"flex",justifyContent:"flex-end",alignContent:"center",children:i})})]})},ae=function(){return Object(te.jsx)(g.a,{display:"flex",width:"100%",mt:4,justifyContent:"center",children:Object(te.jsx)(y.a,{align:"center",color:"textSecondary",children:"Made with \u2764\ufe0f by Joseph and David"})})},ce=Object(O.a)((function(e){return{titleIcon:{fontSize:e.typography.h2.fontSize,marginRight:10}}})),re=function(){var e=Object(l.g)(),t=ce();return Object(te.jsx)(m.a,{maxWidth:"sm",children:Object(te.jsxs)(g.a,{minHeight:"100vh",display:"flex",flexDirection:"column",py:5,children:[Object(te.jsx)(ne,{isHome:!0}),Object(te.jsx)(g.a,{flexGrow:1}),Object(te.jsxs)(x.a,{container:!0,children:[Object(te.jsx)(x.a,{item:!0,xs:12,children:Object(te.jsxs)(g.a,{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",mb:2,children:[Object(te.jsx)(P.a,{className:t.titleIcon}),Object(te.jsx)(y.a,{component:"span",variant:"h3",children:"DevRacer"})]})}),Object(te.jsx)(x.a,{container:!0,item:!0,xs:12,children:Object(te.jsx)(y.a,{variant:"body1",align:"center",children:"DevRacer is an online typing game inspired by TypeRacer. Type the most popular snippets from supported languages and increase your coding speed!"})}),Object(te.jsx)(x.a,{item:!0,xs:12,spacing:3,children:Object(te.jsx)(g.a,{display:"flex",width:"100%",justifyContent:"center",mt:8,children:Object(te.jsx)(v.a,{variant:"contained",size:"large",endIcon:Object(te.jsx)(C.a,{}),onClick:function(){e.push("/custom")},children:"Start a Lobby"})})})]}),Object(te.jsx)(g.a,{flexGrow:2}),Object(te.jsx)(ae,{})]})})},se=n(55),ie=n(23),oe=n(206),le=n(229),ue=n(208),de=n(209),je=n(212),be=n(226),pe=n(213),fe=n(207),he=n(210),Oe=n(211),me=n(75),ge=n(223),xe=function(e){var t=Object.assign({},e);return Object(te.jsx)(g.a,{width:"100%",children:Object(te.jsx)(ge.a,Object(ie.a)({variant:"outlined",margin:"normal",fullWidth:!0},t))})},ye=n(214),ve=Object(O.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:me.a[400]},submit:{margin:e.spacing(3,0,2)},oauthIcons:{color:e.palette.text.secondary}}})),we=function(){var e=Object(l.g)(),t=Object(u.b)(),n=ve(),c=Object(a.useState)({username:"",password:"",rememberMe:!1}),r=Object(i.a)(c,2),s=r[0],o=r[1],d=Object(a.useState)(!1),j=Object(i.a)(d,2),b=j[0],p=j[1],f=Object(u.c)(Y);Object(a.useEffect)((function(){return t(V()),function(){t(V())}}),[t]),Object(a.useEffect)((function(){"succeeded"===f&&(e.push("/"),t(V()))}),[t,e,f]);var h=function(e){return function(t){o((function(n){return Object(ie.a)(Object(ie.a)({},n),{},Object(se.a)({},e,t.target.value))}))}};return Object(te.jsx)(x.a,{container:!0,justify:"center",children:Object(te.jsx)(x.a,{item:!0,xs:12,sm:10,children:Object(te.jsx)(oe.a,{children:Object(te.jsxs)(g.a,{py:5,mt:4,children:["  ",Object(te.jsx)(x.a,{container:!0,justify:"center",children:Object(te.jsx)(x.a,{item:!0,xs:10,sm:8,children:Object(te.jsxs)(g.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",children:[Object(te.jsx)(le.a,{className:n.avatar,children:Object(te.jsx)(fe.a,{})}),Object(te.jsx)(y.a,{variant:"h4",align:"center",gutterBottom:!0,children:"Sign in"}),Object(te.jsxs)(g.a,{width:"100%",mt:2,children:[Object(te.jsx)(xe,{autoFocus:!0,label:"Username",value:s.username,error:"failed"===f,onChange:h("username")}),Object(te.jsx)(xe,{label:"Password",value:s.password,type:b?"text":"password",error:"failed"===f,onChange:h("password"),helperText:"failed"===f?"The username and password were incorrect":"",InputProps:{endAdornment:Object(te.jsx)(ue.a,{position:"end",children:Object(te.jsx)(de.a,{onClick:function(){p((function(e){return!e}))},disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0,children:b?Object(te.jsx)(he.a,{}):Object(te.jsx)(Oe.a,{})})})}}),Object(te.jsx)(je.a,{control:Object(te.jsx)(be.a,{checked:s.rememberMe,onClick:function(){o((function(e){return Object(ie.a)(Object(ie.a)({},e),{},{rememberMe:!e.rememberMe})}))},color:"primary"}),label:"Remember me"}),Object(te.jsx)(v.a,{fullWidth:!0,variant:"contained",className:n.submit,onClick:function(){t(J(s))},children:"Sign In"}),Object(te.jsx)(g.a,{display:"flex",flexDirection:"row-reverse",children:Object(te.jsx)(pe.a,{variant:"body2",onClick:function(){e.push("/register")},children:"Don't have an account? Sign Up"})})]}),Object(te.jsxs)(g.a,{mt:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%",children:[Object(te.jsx)(y.a,{color:"textSecondary",gutterBottom:!0,children:"or you can sign in with"}),Object(te.jsx)(de.a,{href:"".concat(F,"/auth/githubLogin"),children:Object(te.jsx)(ye.a,{className:n.oauthIcons})})]})]})})})]})})})})},Ce=function(){return Object(te.jsx)(m.a,{maxWidth:"sm",children:Object(te.jsxs)(g.a,{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between",py:5,children:[Object(te.jsx)(ne,{}),Object(te.jsx)(we,{}),Object(te.jsx)(ae,{})]})})},ke=Object(O.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:me.a[400]},submit:{margin:e.spacing(3,0,2)}}})),Pe=function(){var e=Object(l.g)(),t=Object(u.b)(),n=ke(),c=Object(a.useState)({username:"",password:"",email:"",nickname:""}),r=Object(i.a)(c,2),s=r[0],o=r[1],d=Object(a.useState)(!1),j=Object(i.a)(d,2),b=j[0],p=j[1],f=Object(u.c)(Y);Object(a.useEffect)((function(){return t(V()),function(){t(V())}}),[t]),Object(a.useEffect)((function(){"succeeded"===f&&(t(V()),e.push("/"))}),[t,e,f]);var h=function(e){return function(t){o((function(n){return Object(ie.a)(Object(ie.a)({},n),{},Object(se.a)({},e,t.target.value))}))}};return Object(te.jsx)(x.a,{container:!0,justify:"center",children:Object(te.jsx)(x.a,{item:!0,xs:12,sm:10,children:Object(te.jsx)(oe.a,{children:Object(te.jsxs)(g.a,{py:5,mt:4,children:["  ",Object(te.jsx)(x.a,{container:!0,justify:"center",children:Object(te.jsx)(x.a,{item:!0,xs:10,sm:8,children:Object(te.jsxs)(g.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",children:[Object(te.jsx)(le.a,{className:n.avatar,children:Object(te.jsx)(fe.a,{})}),Object(te.jsx)(y.a,{variant:"h4",align:"center",gutterBottom:!0,children:"Register"}),Object(te.jsxs)(g.a,{width:"100%",mt:2,children:[Object(te.jsx)(xe,{autoFocus:!0,label:"Username",value:s.username,error:"failed"===f,onChange:h("username")}),Object(te.jsx)(xe,{label:"Password",value:s.password,type:b?"text":"password",error:"failed"===f,onChange:h("password"),InputProps:{endAdornment:Object(te.jsx)(ue.a,{position:"end",children:Object(te.jsx)(de.a,{onClick:function(){p((function(e){return!e}))},disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0,children:b?Object(te.jsx)(he.a,{}):Object(te.jsx)(Oe.a,{})})})}}),Object(te.jsx)(xe,{label:"Email",value:s.email,error:"failed"===f,onChange:h("email")}),Object(te.jsx)(xe,{label:"Nickname",value:s.nickname,error:"failed"===f,onChange:h("nickname"),helperText:"failed"===f?"The username or email has already been taken.":""}),Object(te.jsx)(v.a,{fullWidth:!0,variant:"contained",className:n.submit,onClick:function(){t(_(s))},children:"Register"}),Object(te.jsx)(g.a,{display:"flex",flexDirection:"row-reverse",children:Object(te.jsx)(pe.a,{variant:"body2",onClick:function(){t(V()),e.push("/login")},children:"Already have an account? Log In"})})]})]})})})]})})})})},Te=function(){return Object(te.jsx)(m.a,{maxWidth:"sm",children:Object(te.jsxs)(g.a,{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between",py:5,children:[Object(te.jsx)(ne,{}),Object(te.jsx)(Pe,{}),Object(te.jsx)(ae,{})]})})},Ie=function(e){switch(e){case 1:return"c_cpp";case 2:return"golang";case 3:return"javascript";case 4:return"python";default:return"plain_text"}},Se=function(e){return Object(ie.a)(Object(ie.a)({},e),{},{language:Ie(e.language)})},Re=function(e,t){return e.some((function(e){return e===t}))},Ne={playerId:"",lobbyId:"",isHost:!1,state:"waiting",snippet:{id:"",snippet:"",tokenCount:0,language:"plain_text",dateCreated:new Date},isQueued:!1,gameProgress:[],queuedPlayers:[],placements:[],countdown:0},Ae=Object(R.c)({name:"game",initialState:Ne,reducers:{createGameAction:function(e,t){var n=t.payload;e.state="waiting",e.isHost=!0,e.playerId=n.playerId,e.lobbyId=n.lobbyId,e.snippet=Se(n.snippet)},joinGameAction:function(e,t){var n=t.payload;e.state="waiting",e.playerId=n.playerId,e.snippet=Se(n.snippet),e.gameProgress=n.gameProgress,e.queuedPlayers=n.queuedPlayers,e.placements=n.placements,e.isQueued=n.wasQueued},newPlayerAction:function(e,t){var n=t.payload,a={playerId:n.playerId,displayName:n.displayName,percentCompleted:n.percentCompleted,wpm:0};n.wasQueued?e.queuedPlayers.push(a):e.gameProgress.push(a)},gameProgressAction:function(e,t){for(var n=t.payload,a=0;a<e.gameProgress.length;a++)e.gameProgress[a].playerId===n.playerId&&(e.gameProgress[a].percentCompleted=n.percentCompleted,e.gameProgress[a].wpm=n.wpm)},gameStartAction:function(e,t){var n=t.payload;0===n.countdown?e.state="inProgress":e.state="countdown",e.countdown=n.countdown},playerFinishedAction:function(e,t){var n=t.payload;e.placements=n.placements},gameFinishedAction:function(e,t){var n=t.payload;e.state="finished",e.placements=n.placements},nextGameAction:function(e,t){var n=t.payload;e.state="waiting",e.snippet=Se(n.snippet),e.gameProgress=n.gameProgress,e.queuedPlayers=n.queuedPlayers,e.placements=n.placements,e.isQueued=!1},leaveGameAction:function(e,t){var n=t.payload;e.placements=n.placements,e.gameProgress=e.gameProgress.filter((function(e){return e.playerId!==n.playerId})),e.queuedPlayers=e.queuedPlayers.filter((function(e){return e.playerId!==n.playerId}))},lobbyClosedAction:function(e,t){return Ne}}}),Le=Ae.reducer,Fe=Ae.actions,Ge=Fe.createGameAction,De=Fe.gameFinishedAction,Ee=Fe.gameProgressAction,qe=Fe.gameStartAction,He=Fe.joinGameAction,Me=Fe.leaveGameAction,We=Fe.lobbyClosedAction,Be=Fe.playerFinishedAction,Je=Fe.newPlayerAction,ze=Fe.nextGameAction,_e=function(e){return e.game.state},Ue=function(e){return e.game.isHost},Qe=function(e){return e.game.lobbyId},$e=function(e){return e.game.playerId},Ke=function(e){return e.game.snippet.snippet},Ve=function(e){return e.game.snippet.language},Xe=function(e){return e.game.gameProgress},Ye=function(e){return e.game.queuedPlayers},Ze=function(e){return e.game.countdown},et=function(e){return e.game.placements},tt=n(46),nt=n(56),at=n(111),ct=n.n(at),rt=(n(81),n(166),n(167),n(168),n(169),n(170),n(171),function(e){var t=e.value,n=void 0===t?"":t,a=e.className,c=void 0===a?"":a,r=e.options,s=void 0===r?{}:r,i=Object(nt.a)(e,["value","className","options"]);return Object(te.jsx)(ct.a,Object(ie.a)({className:"aceEditor "+c,value:n,theme:"dracula",showGutter:!1,highlightActiveLine:!1,fontSize:13,setOptions:Object(ie.a)({useSoftTabs:!1},s)},i))}),st=function(e){var t=e.text,n=void 0===t?"":t;return Object(te.jsx)(rt,{mode:"plain_text",className:"backgroundEditor",value:n,readOnly:!0,onLoad:function(e){e.commands.commmandKeyBinding={},e.textInput.getElement().disabled=!0,e.renderer.$cursorLayer.element.style.display="none"},options:{displayIndentGuides:!1}})},it=n(85),ot=function(e){var t=e.language,n=void 0===t?"plain_text":t,c=e.focus,r=void 0!==c&&c,s=e.disabled,i=void 0!==s&&s,o=e.onBlur,l=e.ranges,u=e.onChange,d=e.text,j=Object(a.useRef)(),b=Object(a.useRef)([]);Object(a.useEffect)((function(){if(void 0!==j.current){var e,t=Object(it.a)(b.current);try{for(t.s();!(e=t.n()).done;){var n=e.value;j.current.session.removeMarker(n)}}catch(i){t.e(i)}finally{t.f()}var a,c=[],r=Object(it.a)(l);try{for(r.s();!(a=r.n()).done;){var s=a.value;c.push(j.current.session.addMarker(s,"error-marker","text"))}}catch(i){r.e(i)}finally{r.f()}b.current=c}}),[l]),Object(a.useEffect)((function(){var e;j&&r&&(null===(e=j.current)||void 0===e||e.focus())}),[j,r]);return Object(te.jsx)(rt,{className:"foregroundEditor",mode:n,onLoad:function(e){j.current=e},onBlur:o,onChange:u,value:d,readOnly:i})},lt=function(e){var t=e.snippet,n=void 0===t?"":t,c=e.language,r=void 0===c?"plain_text":c,s=e.disabled,o=void 0!==s&&s,l=e.reloaded,u=e.onChange,d=void 0===u?function(e){}:u,j=Object(a.useState)(!1),b=Object(i.a)(j,2),p=b[0],f=b[1],h=Object(a.useState)(""),O=Object(i.a)(h,2),m=O[0],x=O[1],y=Object(a.useState)(""),v=Object(i.a)(y,2),w=v[0],C=v[1],k=Object(a.useState)([]),P=Object(i.a)(k,2),T=P[0],I=P[1],S=Object(a.useState)([]),R=Object(i.a)(S,2),N=R[0],A=R[1];Object(a.useEffect)((function(){A(n.split("\n")),C(n),x("")}),[n,l]);return Object(te.jsxs)(g.a,{onClickCapture:function(e){f(!0)},children:[Object(te.jsx)(st,{text:w}),Object(te.jsx)(ot,{language:r,text:m,ranges:T,focus:p,onChange:function(e){for(var t=e.split("\n"),n=[],a=[],c=0;c<t.length;c++){var r=t[c];if(c>N.length-1){for(var s=c;s<t.length;s++)a.push(new tt.Range(s,0,s,r.length));break}for(var i=N[c],o=0;r[o]===i[o]&&o<r.length;)o++;o<r.length&&a.push(new tt.Range(c,o,c,r.length));for(var l="",u=0;u<r.length;u++)"\t"===r[u]?l+="\t":l+=" ";i=l+i.slice(o),n.push(i)}for(;c<N.length;c++)n.push(N[c]);C(n.join("\n")),I(a),m!==e&&x(e),d(e)},onBlur:function(){f(!1)},disabled:o})]})},ut=n(230),dt=n(215),jt=n(76),bt=n(74),pt=Object(O.a)((function(e){return Object(ut.a)({progress:function(e){var t=e.finished,n=e.queued;return t?{backgroundColor:jt.a[500],width:"100%"}:n?{backgroundColor:bt.a[800],width:"100%"}:{width:"100%"}},typography:function(e){return e.queued?{color:bt.a[400]}:{}}})})),ft=function(e){var t=e.progress,n=e.queued,a=void 0!==n&&n,c=Object(u.c)(et),r=Re(c,t.playerId),s=pt({finished:r,queued:a}),i=r?100:100*t.percentCompleted;return Object(te.jsxs)(g.a,{display:"flex",alignItems:"center",mb:1,width:"100%",children:[Object(te.jsx)(y.a,{variant:"caption",className:s.typography,children:t.displayName}),Object(te.jsx)(g.a,{display:"flex",flexGrow:1,mx:1,children:Object(te.jsx)(dt.a,{variant:"determinate",value:i,classes:{colorPrimary:s.progress,barColorPrimary:s.progress}})}),Object(te.jsxs)(y.a,{variant:"caption",align:"right",className:s.typography,children:[t.wpm," wpm"]})]})},ht=function(){var e=Object(u.c)(Xe),t=Object(u.c)(Ye),n=Object(a.useCallback)((function(){for(var n=[],a=0;a<e.length;a++)n.push(Object(te.jsx)(ft,{progress:e[a]}));for(var c=0;c<t.length;c++)n.push(Object(te.jsx)(ft,{progress:t[c],queued:!0}));return n}),[e,t]);return Object(te.jsx)(g.a,{width:"100%",children:n()})},Ot=n(216),mt=n(112),gt=n.n(mt),xt=function(e){var t=e.handleOpenLinkDialog,n=Object(u.c)(_e),a=Object(u.c)(Ue),c=Object(u.c)(Ze),r=0===c?100:Math.round(5-c/5*100),s="";return"waiting"===n?s=a?"The lobby is ready. Feel free to start the game whenever you want.":"The lobby is ready. Please wait for the host to start the game.":"countdown"===n?s="Get ready! The game is starting.":"inProgress"===n?s="The game is in progress!":"finished"===n&&(s=a?"The race is finished! Please fetch the next game.":"The race is finished! Please wait for the host to move onto the next game."),Object(te.jsxs)(x.a,{container:!0,justify:"space-between",alignItems:"center",spacing:1,children:[Object(te.jsx)(x.a,{item:!0,children:Object(te.jsx)(de.a,{onClick:t,children:Object(te.jsx)(gt.a,{})})}),Object(te.jsx)(x.a,{item:!0,children:Object(te.jsxs)(g.a,{display:"flex",alignItems:"center",children:[Object(te.jsx)(g.a,{mr:1,children:Object(te.jsx)(y.a,{component:"span",variant:"caption",children:s})}),"countdown"===n?Object(te.jsxs)(g.a,{position:"relative",display:"inline-flex",children:[Object(te.jsx)(Ot.a,{variant:"determinate",value:r,size:30}),Object(te.jsx)(g.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(te.jsx)(y.a,{variant:"caption",component:"div",color:"textSecondary",children:c})})]}):null]})})]})},yt=n(227),vt=n(217),wt=n(218),Ct=n(219),kt=n(220),Pt=n(113),Tt=n.n(Pt),It=function(e){var t=e.handleClose,n=void 0===t?function(){}:t,a=Object(nt.a)(e,["handleClose"]),c=Object(u.c)(Qe),r="".concat(window.location.href,"/").concat(c);return Object(te.jsxs)(yt.a,{open:a.open,onClose:n,"aria-labelledby":"responsive-dialog-title",children:[Object(te.jsx)(vt.a,{id:"responsive-dialog-title",children:"Invite your friends"}),Object(te.jsxs)(wt.a,{children:[Object(te.jsx)(Ct.a,{gutterBottom:!0,children:"Copy the link below and send it to your friends to have them join you in this race!"}),Object(te.jsx)(ge.a,{value:r,variant:"outlined",fullWidth:!0,InputProps:{endAdornment:Object(te.jsx)(ue.a,{position:"end",children:Object(te.jsx)(de.a,{onClick:function(){navigator.clipboard.writeText(r)},children:Object(te.jsx)(Tt.a,{})})})}})]}),Object(te.jsx)(kt.a,{children:Object(te.jsx)(v.a,{autoFocus:!0,onClick:n,color:"primary",children:"Close"})})]})},St=function(e){var t=e.handleClose,n=void 0===t?function(){}:t,a=Object(nt.a)(e,["handleClose"]);return Object(te.jsxs)(yt.a,{open:a.open,onClose:n,"aria-labelledby":"responsive-dialog-title",children:[Object(te.jsx)(vt.a,{id:"responsive-dialog-title",children:"Lobby closed"}),Object(te.jsx)(wt.a,{children:Object(te.jsx)(Ct.a,{gutterBottom:!0,children:"The lobby has closed because the host left the game. Feel free to join another lobby or practice on your own!"})}),Object(te.jsx)(kt.a,{children:Object(te.jsx)(v.a,{autoFocus:!0,onClick:n,color:"primary",children:"Close"})})]})},Rt=function(){var e=Object(a.useRef)(void 0),t=Object(l.g)(),n=Object(u.b)(),c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],d=Object(a.useState)(!1),j=Object(i.a)(d,2),b=j[0],p=j[1],f=Object(a.useState)(!0),h=Object(i.a)(f,2),O=h[0],y=h[1],w=Object(u.c)(W),C=Object(u.c)(Ke),k=Object(u.c)(Ve),P=Object(u.c)(Ue),T=Object(u.c)(_e),I=Object(u.c)($e),S=Object(u.c)(et),R=Object(l.h)().lobby;Object(a.useEffect)((function(){var t,n;return e.current=new WebSocket("".concat("wss://devracer.herokuapp.com","/custom?name=").concat(w)),null===(t=e.current)||void 0===t||t.addEventListener("open",N),null===(n=e.current)||void 0===n||n.addEventListener("message",(function(e){return A(e)})),function(){var t;null===(t=e.current)||void 0===t||t.send(JSON.stringify({action:"leaveGame"}))}}),[]);var N=function(){var t,n;R?null===(t=e.current)||void 0===t||t.send(JSON.stringify({action:"joinGame",lobbyId:R})):null===(n=e.current)||void 0===n||n.send(JSON.stringify({action:"createGame"}))},A=function(e){var t=JSON.parse(e.data);switch(t.action){case"errorResponse":L(t.payload);break;case"createGameResponse":F(t.payload);break;case"joinGameResponse":G(t.payload);break;case"newPlayerResponse":D(t.payload);break;case"gameProgressResponse":E(t.payload);break;case"gameStartResponse":q(t.payload);break;case"playerFinishedResponse":H(t.payload);break;case"gameFinishedResponse":M(t.payload);break;case"nextGameResponse":B(t.payload);break;case"leaveGameResponse":J(t.payload);break;case"lobbyClosedResponse":z(t.payload)}},L=function(e){console.log(e)},F=function(e){n(Ge(e)),o(!0)},G=function(e){n(He(e))},D=function(e){n(Je(e))},E=function(e){n(Ee(e))},q=function(e){n(qe(e))},H=function(e){n(Be(e))},M=function(e){n(De(e))},B=function(e){n(ze(e)),y((function(e){return!e}))},J=function(e){n(Me(e))},z=function(e){n(We(e)),_()},_=function(){p(!0)};return Object(te.jsxs)(m.a,{maxWidth:"sm",children:[Object(te.jsxs)(g.a,{minHeight:"100vh",display:"flex",flexDirection:"column",py:5,children:[Object(te.jsx)(ne,{}),Object(te.jsxs)(x.a,{container:!0,justify:"center",children:[Object(te.jsx)(x.a,{item:!0,xs:12,children:Object(te.jsx)(g.a,{mt:2,children:Object(te.jsx)(xt,{handleOpenLinkDialog:function(){o(!0)}})})}),Object(te.jsx)(x.a,{item:!0,xs:12,children:Object(te.jsx)(ht,{})}),Object(te.jsx)(x.a,{item:!0,className:"aceEditorContainer",children:Object(te.jsx)(lt,{snippet:C,language:k,disabled:"inProgress"!==T||Re(S,I),reloaded:O,onChange:function(t){var n;null===(n=e.current)||void 0===n||n.send(JSON.stringify({action:"gameProgress",payload:t}))}})}),P?Object(te.jsx)(x.a,{container:!0,item:!0,xs:12,justify:"flex-end",children:Object(te.jsx)(x.a,{item:!0,children:Object(te.jsx)(g.a,{mt:2,children:"finished"===T?Object(te.jsx)(v.a,{variant:"contained",onClick:function(){var t;null===(t=e.current)||void 0===t||t.send(JSON.stringify({action:"nextGame"}))},children:"Next Game"}):Object(te.jsx)(v.a,{variant:"contained",onClick:function(){var t;null===(t=e.current)||void 0===t||t.send(JSON.stringify({action:"startGame"}))},disabled:"waiting"!==T,children:"Start Game"})})})}):null]}),Object(te.jsx)(ae,{})]}),Object(te.jsx)(It,{open:s,handleClose:function(){o(!1)}}),Object(te.jsx)(St,{open:b,handleClose:function(){p(!1),t.push("/")}})]})},Nt=function(){var e=Object(u.b)(),t=Object(u.c)(Z),n=Object(l.g)();return Object(a.useEffect)((function(){e(z(new URLSearchParams(window.location.search)))}),[e]),Object(a.useEffect)((function(){t&&(window.history.replaceState(null,"",window.location.href.split("?")[0]),n.replace("/"))}),[t,n]),Object(te.jsx)(te.Fragment,{})},At=function(e){return Object(a.useEffect)((function(){document.title=e.title}),[e.title]),Object(te.jsx)(te.Fragment,{})},Lt=function(){var e=Object(u.b)(),t=Object(u.c)(X),n=Object(a.useState)(!0),c=Object(i.a)(n,2),r=c[0],s=c[1],b=Object(u.c)(Z),p=Object(u.c)(ee);return Object(a.useEffect)((function(){r&&t&&(e(Q({refreshToken:t})),s(!1))}),[r,s,t,e]),Object(a.useEffect)((function(){b&&e(D({userid:p}))}),[e,b,p]),Object(te.jsxs)(d.a,{theme:h,children:[Object(te.jsx)(j.a,{}),Object(te.jsx)(o.a,{children:Object(te.jsxs)(l.d,{children:[Object(te.jsxs)(l.b,{path:"/auth/githubCallback",children:[Object(te.jsx)(At,{title:"Logging in..."}),Object(te.jsx)(Nt,{})]}),Object(te.jsxs)(l.b,{path:"/login",children:[Object(te.jsx)(At,{title:"Login - DevRacer"}),Object(te.jsx)(Ce,{})]}),Object(te.jsxs)(l.b,{path:"/register",children:[Object(te.jsx)(At,{title:"Register - DevRacer"}),Object(te.jsx)(Te,{})]}),Object(te.jsxs)(l.b,{path:"/custom/:lobby?",children:[Object(te.jsx)(At,{title:"Custom Game - DevRacer"}),Object(te.jsx)(Rt,{})]}),Object(te.jsxs)(l.b,{path:"/",children:[Object(te.jsx)(At,{title:"DevRacer"}),Object(te.jsx)(re,{})]}),Object(te.jsx)(l.a,{to:"/"})]})})]})},Ft=n(24),Gt=function(e){switch(e){case 1:return"c_cpp";case 2:return"golang";case 3:return"javascript";case 4:return"python";default:return"plain_text"}},Dt=function(e){var t=e.data.practiceRace,n=t.snippet;return{snippet:{id:n.id,raceContent:n.raceContent,tokenCount:n.tokenCount,language:Gt(n.language)},typedSoFar:"",timeLimit:t.timeLimit}},Et="raceField",qt=Object(R.b)("".concat(Et,"/fetchNewPracticeRace"),Object(S.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat(F,"/graphql"),{query:"\n  query getPracticeRace {\n    practiceRace {\n      snippet {\n        id\n        raceContent\n        tokenCount\n        language\n      }\n      timeLimit\n    }\n  }\n"});case 2:return t=e.sent,e.abrupt("return",Dt(t.data));case 4:case"end":return e.stop()}}),e)})))),Ht=Object(R.c)({name:Et,initialState:{race:{snippet:{id:"0",raceContent:"",tokenCount:0,language:"plain_text"},typedSoFar:"",timeLimit:0},status:"idle"},reducers:{typedSoFarChanged:function(e,t){e.race.typedSoFar=t.payload}},extraReducers:function(e){e.addCase(qt.fulfilled,(function(e,t){e.status="succeeded",e.race=t.payload})),e.addCase(qt.rejected,(function(e,t){console.log(t)}))}}),Mt=Ht.reducer,Wt=(Ht.actions.typedSoFarChanged,n(115)),Bt=n.n(Wt),Jt=n(40),zt={key:"root",version:1,storage:Bt.a,whitelist:["auth","user"]},_t=Object(Ft.c)({raceField:Mt,user:H,auth:K,game:Le}),Ut=Object(Jt.g)(zt,_t),Qt=Object(R.a)({reducer:Ut,middleware:Object(R.d)({serializableCheck:{ignoredActions:[Jt.a,Jt.f,Jt.b,Jt.c,Jt.d,Jt.e]}})}),$t=Object(Jt.h)(Qt),Kt=n(116);s.a.render(Object(te.jsx)(c.a.StrictMode,{children:Object(te.jsx)(u.a,{store:Qt,children:Object(te.jsx)(Kt.a,{loading:null,persistor:$t,children:Object(te.jsx)(Lt,{})})})}),document.getElementById("root"))},81:function(e,t,n){}},[[174,1,2]]]);
//# sourceMappingURL=main.04e10883.chunk.js.map